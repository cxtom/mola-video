{"version":3,"sources":["Video.js"],"names":["type","level","Video","args","state","start","onClick","bind","onPlay","onEnd","setState","video","refs","play","renderRaw","props","src","poster","renderIframe","render","className","style","videoType","top","left","width","height","act","backgroundImage","displayName","propTypes","number","isRequired","string","oneOf","defaultProps"],"mappings":"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","file":"Video.js","sourcesContent":["/**\n * @file 视频组件\n * @author cxtom <cxtom2008@gmail.com>\n */\n\nimport React, {Component, PropTypes} from 'react';\n\nimport {\n    registerComponent,\n    MOLA_COMPONENT_LEVEL_ATOM,\n    px2rem\n} from 'mola';\n\nimport cx from 'classnames';\n\nexport const type = 'Video';\nexport const level = MOLA_COMPONENT_LEVEL_ATOM;\n\nexport class Video extends Component {\n\n    constructor(...args) {\n        super(...args);\n        this.state = {\n            start: false\n        };\n        this.onClick = this.onClick.bind(this);\n        this.onPlay = this.onPlay.bind(this);\n        this.onEnd = this.onEnd.bind(this);\n    }\n\n    onPlay() {\n        this.setState({start: true});\n    }\n\n    onEnd() {\n        this.setState({start: false});\n    }\n\n    onClick() {\n        const video = this.refs.video;\n        video.play();\n    }\n\n    renderRaw() {\n\n        return (\n            <video\n                src={this.props.src}\n                poster={this.props.poster}\n                className=\"mola-video-raw\"\n                onPlay={this.onPlay}\n                onPause={this.onEnd}\n                onEnded={this.onEnd}\n                data-type=\"btn\"\n                autoBuffer\n                autoPlay\n                preload=\"none\"\n                width=\"100%\"\n                height=\"100%\"\n                ref=\"video\" />\n        );\n    }\n\n    renderIframe() {\n\n        return (\n            <iframe\n                src={this.props.src}\n                onLoad={this.onPlay}\n                className=\"mola-video-iframe\"\n                data-type=\"btn\"\n                scrolling=\"no\"\n                frameBorder=\"0\"\n                allowFullScreen=\"true\" />\n        );\n    }\n\n    render() {\n\n        let {\n            className = null,\n            style = null,\n            videoType,\n            top,\n            left,\n            width,\n            height,\n            poster\n        } = this.props;\n\n        const start = this.state.start;\n        const act = videoType === 'iframe' ? 'iframe' : (\n            start ? 'pause' : 'play'\n        );\n\n        return (\n            <div\n                onClick={videoType === 'iframe' ? null : this.onClick}\n                dara-type=\"btn\"\n                data-click={`{\"mod\": \"video\", \"act\": \"b_${act}\"}`}\n                className={cx('mola-video', className, {'state-start': start})}\n                style={{\n                    ...style,\n                    top: px2rem(top),\n                    left: px2rem(left),\n                    width: px2rem(width),\n                    height: px2rem(height),\n                    backgroundImage: start ? 'none' : `url(${poster})`\n                }}>\n                {videoType === 'iframe' ? this.renderIframe() : this.renderRaw()}\n            </div>\n        );\n    }\n\n}\n\nVideo.displayName = type;\n\nVideo.propTypes = {\n    top: PropTypes.number.isRequired,\n    left: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    poster: PropTypes.string,\n    videoType: PropTypes.oneOf(['iframe', 'raw']),\n    src: PropTypes.string\n};\n\nVideo.defaultProps = {\n    top: 0,\n    left: 0,\n    width: 320,\n    height: 180,\n    videoType: 'iframe'\n};\n\nexport default registerComponent(type, level)(Video);\n"]}