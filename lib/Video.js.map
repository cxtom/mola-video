{"version":3,"sources":["Video.js"],"names":["type","level","Video","args","state","start","onClick","bind","onPlay","onEnd","setState","video","refs","play","renderRaw","props","autoPlay","title","src","poster","renderIframe","render","className","style","videoType","top","left","width","height","act","backgroundImage","displayName","propTypes","number","isRequired","string","oneOf","bool","defaultProps"],"mappings":"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","file":"Video.js","sourcesContent":["/**\n * @file 视频组件\n * @author cxtom <cxtom2008@gmail.com>\n */\n\nimport React, {Component, PropTypes} from 'react';\n\nimport {\n    registerComponent,\n    MOLA_COMPONENT_LEVEL_ATOM,\n    px2rem\n} from 'mola';\n\nimport cx from 'classnames';\n\nexport const type = 'Video';\nexport const level = MOLA_COMPONENT_LEVEL_ATOM;\n\nexport class Video extends Component {\n\n    constructor(...args) {\n        super(...args);\n        this.state = {\n            start: false\n        };\n        this.onClick = this.onClick.bind(this);\n        this.onPlay = this.onPlay.bind(this);\n        this.onEnd = this.onEnd.bind(this);\n    }\n\n    onPlay() {\n        this.setState({start: true});\n    }\n\n    onEnd() {\n        this.setState({start: false});\n    }\n\n    onClick() {\n        const video = this.refs.video;\n        video.play();\n    }\n\n    renderRaw() {\n\n        const {autoPlay, title} = this.props;\n\n        return (\n            <video\n                src={this.props.src}\n                poster={this.props.poster}\n                className=\"mola-video-raw\"\n                onPlay={this.onPlay}\n                onPause={this.onEnd}\n                onEnded={this.onEnd}\n                title={title}\n                data-type=\"btn\"\n                autoBuffer\n                autoPlay={autoPlay}\n                preload=\"none\"\n                width=\"100%\"\n                height=\"100%\"\n                ref=\"video\" />\n        );\n    }\n\n    renderIframe() {\n\n        return (\n            <iframe\n                src={this.props.src}\n                onLoad={this.onPlay}\n                className=\"mola-video-iframe\"\n                data-type=\"btn\"\n                scrolling=\"no\"\n                frameBorder=\"0\"\n                allowFullScreen=\"true\" />\n        );\n    }\n\n    render() {\n\n        let {\n            className = null,\n            style = null,\n            videoType,\n            top,\n            left,\n            width,\n            height,\n            poster\n        } = this.props;\n\n        const start = this.state.start;\n        const act = videoType === 'iframe' ? 'iframe' : (\n            start ? 'pause' : 'play'\n        );\n\n        return (\n            <div\n                onClick={videoType === 'iframe' ? null : this.onClick}\n                dara-type=\"btn\"\n                data-click={`{\"mod\": \"video\", \"act\": \"b_${act}\"}`}\n                className={cx('mola-video', className, {'state-start': start})}\n                style={{\n                    ...style,\n                    top: px2rem(top),\n                    left: px2rem(left),\n                    width: px2rem(width),\n                    height: px2rem(height),\n                    backgroundImage: start ? 'none' : `url(${poster})`\n                }}>\n                {videoType === 'iframe' ? this.renderIframe() : this.renderRaw()}\n            </div>\n        );\n    }\n\n}\n\nVideo.displayName = type;\n\nVideo.propTypes = {\n    top: PropTypes.number.isRequired,\n    left: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    poster: PropTypes.string,\n    videoType: PropTypes.oneOf(['iframe', 'raw']),\n    src: PropTypes.string,\n    autoPlay: PropTypes.bool\n};\n\nVideo.defaultProps = {\n    top: 0,\n    left: 0,\n    width: 320,\n    height: 180,\n    videoType: 'iframe',\n    autoPlay: true\n};\n\nexport default registerComponent(type, level)(Video);\n"]}